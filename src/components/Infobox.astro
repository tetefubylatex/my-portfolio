---
// インターフェース（どの情報を受け取るか）を定義
interface Props {
  name: string;
  nameEn?: string;
  image?: string; // ? は「なくてもOK」という意味
  imageCaption?: string; 
  mail?: string;
  birth?: string;
  likeFood?: string;
  kiraiFood?: string;
  likeColors?: string;
  likeAnimals?: string;
  mostLikeAnimal?: string;
  likePlant?: string;
  latexnoyomi?: string;
  workspace?: string;
  twitter?: string;
  bluesky?: string;
  pixiv?: string;
  oekakiapp?: string;

}

const { name, image, birth,oekakiapp,mail,nameEn,kiraiFood,workspace,twitter,bluesky,pixiv,imageCaption,likeAnimals,mostLikeAnimal,likeColors,likeFood,likePlant,latexnoyomi} = Astro.props;
---

<aside class="infobox">
  <div class="infobox-header">
    <div class="infobox-title">{name}</div>
    {nameEn && <div class="infobox-subtitle">{nameEn}</div>}
  </div>
  
  {image && (
    <div class="infobox-image-container">
      <img src={image} alt={name} class="infobox-image" />
{imageCaption && <div class="infobox-caption" set:html={imageCaption} />}
    </div>
  )}

<table class="infobox-table">

  {birth && (<tr><th>誕生日</th><td>{birth}</td></tr>)}

  {workspace && (<tr><th>作業環境</th><td>{workspace}</td></tr>)}
    {oekakiapp && (<tr><th>使用ソフト</th><td>{oekakiapp}</td></tr>)}
  {latexnoyomi && (<tr><th>想定されるLaTeXの読み方</th><td>{latexnoyomi}</td></tr>)}
  {likeColors && (
  <tr>
    <th>好きな色</th>
    <td style={`color: ${likeColors}; font-style: italic; font-weight: bold;`}>
      {likeColors}
    </td>
  </tr>
)}
  {likeAnimals && (<tr><th>好きな動物</th><td>{likeAnimals}</td></tr>)}
  {mostLikeAnimal && (<tr><th>最推し</th><td>{mostLikeAnimal}</td></tr>)}
  {likePlant && (
  <tr>
    <th>好きな植物</th>
    <td>
      <div class="marquee-container">
        <div class="marquee-text">{likePlant}</div>
      </div>
    </td>
  </tr>
)}
  {likeFood && (<tr><th>好きな食べ物</th><td>{likeFood}</td></tr>)}
  {kiraiFood && (<tr><th>苦手な食べ物</th><td>{kiraiFood}</td></tr>)}

  {twitter && (<tr><th>twitter</th><td><a href={`https://X.com/${twitter}`} ...>@{twitter}</a></td></tr>)}
  {bluesky && (<tr><th>bluesky</th><td><a href={`https://bsky.app/profile/${bluesky}`} ...>{bluesky}</a></td></tr>)}
  {pixiv && (<tr><th>pixiv</th><td><a href={`https://www.pixiv.net/users/${pixiv}`} ...>{pixiv}</a></td></tr>)}
  {mail && (<tr><th></th><td>{mail}</td></tr>)}
</table>
</aside>

<style>
  
  /* 電光掲示板の土台（ネオン管のケース風） */
  .marquee-container {
    width: 100%;
    max-width: 120px; /* 横伸び防止 */
    overflow: hidden;
    background: #050505; /* 真っ黒に近い背景 */
    border: 2px solid #333;
    border-radius: 4px;
    white-space: nowrap;
    display: block;
    box-shadow: inset 0 0 5px #000; /* 内側に影を入れて奥行きを出す */
  }

  /* ネオン文字の設定 */
  .marquee-text {
    display: inline-block;
    color: #fff; /* 文字の芯は白 */
    font-family: 'Courier New', monospace;
    font-weight: bold;
    padding-right: 50px; /* 文字の後ろに少し余白 */
    
    /* ここがネオンの肝！緑色の光を重ねる */
    text-shadow: 
      0 0 5px #fff, 
      0 0 10px #00ff00, 
      0 0 20px #00ff00, 
      0 0 40px #00ff00;
      
    animation: marquee 3s linear infinite;
  }

  @keyframes marquee {
    0% { transform: translateX(100%); }   /* 右端からスタート */
    100% { transform: translateX(-100%); } /* 左端まで消える */
  }



    .infobox-caption a {
    color: #0645ad;
    text-decoration: underline;
  }

    .infobox-table td a {
    color: #0645ad; /* Wikipediaっぽいリンクの色 */
    text-decoration: none;
  }
  .infobox-table td a:hover {
    text-decoration: underline; /* マウスを載せた時だけ下線を出す */
  }

    /* 英語表記（サブタイトル）のサイズ調整 */
  .infobox-subtitle {
    font-size: 0.85rem; /* 0.8emより少し小さく調整 */
    color: #666;        /* 少し色を薄くするとWikipedia風になります */
    margin-top: 2px;
    text-align: center;
  }

  /* 画像の下の脚注（キャプション）のサイズ調整 */
  .infobox-caption {
    font-size: 0.7rem;  /* さらに小さく設定 */
    color: #444;
    margin-top: 4px;
    line-height: 1.3;   /* 行間を少し詰める */
    text-align: center;   /* 左寄せで見やすく */
  }

  .infobox {
    float: right;
    width: 280px;
    margin: 0 0 1rem 1rem;
    border: 1px solid #ccc;
    background-color: #f8f9fa;
    font-size: 0.8em;
    padding: 10px;
    font-family: sans-serif;
  }
  .infobox-title {
    text-align: center;
    font-weight: bold;
    font-size: 1.2em;
    background-color: #eaecf0;
    padding: 5px;
    margin-bottom: 10px;
  }
  .infobox-image {
    width: 100%;
    height: auto;
    border: 1px solid #ccc;
    margin-bottom: 10px;
  }
  .infobox-table {
    width: 100%;
    border-collapse: collapse;
  }
  .infobox-table th {
    text-align: left;
    width: 35%;
    vertical-align: top;
    padding: 3px 0;
  }
  .infobox-table td {
    padding: 3px 0;
  }
  @media (max-width: 720px) {
    .infobox {
      float: none;
      width: 100%;
      margin: 0 auto 1rem auto;
      display: block;
      text-align: center;
      box-sizing: border-box;
    }
    .infobox-table {
      margin: 0 auto;
    }
  }
</style>
