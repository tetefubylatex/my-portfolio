---
import Layout from '../layouts/Layout.astro';
import Infobox from '../components/Infobox.astro';
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';
// 既存のインポートの下に追加
const allWorks = await Astro.glob('../assets/works/**/*.{jpg,jpeg,png,webp,JPG,JPEG,PNG,WEBP}');

// 新しい順に並べ替えて、最初の4つだけを取り出す
const recentWorks = allWorks
  .reverse() // 後のファイル（新しいもの）を前に持ってくる
  .slice(0, 4); // 0番目から4個分を切り出す
---

<!doctype html>
<html lang="ja">
	<head>
		<BaseHead title="LaTeX-Gallery" description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
            <Infobox 
<Infobox 
  name="テテフでLaTeX" 
  nameEn="LaTeX"
  image="/images/backgrounds/IMG_2416.jpeg"
  imageCaption='<a href="https://x.com/_TeLaX" target="_blank">twitter（現X）</a>のアイコン'
  twitter='_TeLaX'
  latexnoyomi='ラテックス、ラテフ、ラテック、ラーテック、レイテフ、レイテック、レイテックス'
  likeAnimals='ウシ科🐃 海獣🦭 鳥類全般🦆'
  mostLikeAnimal='ニホンカモシカ🐐'
  likeColors='#B53827'
  likePlant='Black Lotus'
  birth='8月16日'
  likeFood='そば 汁無し麺 ホタテ 日本酒🍶 辛いもの🔥'
  kiraiFood='納豆 コーヒー 果物全般'
  workspace='iPad Pro 12.9(6th gen)とApple pencil'
  oekakiapp='Procreate'
></Infobox>
			<h2>LaTeX-Gallery</h2>
      	<section style="margin-top: 2rem; border-top: 1px solid #ccc; padding-top: 1rem;"></section>
			<p></br>
			自称furry絵描きのLaTeXです。</br>
			ウシ科動物の魅力を広めるべく活動しています。</br>
			ウシ科以外の動物も大体好きです。</br>
			最近はポケモンも好きです。（節操がない）</br>
			</p>
			<figure class="main-image">
  <img src="/images/backgrounds/IMG_2402.jpeg" alt="テテフ">
  <figcaption>カプ・テテフがLaTeXを編集している様子</figcaption>
</figure>

			<p>
				作った作品や好きなコンテンツを語ったり、色んな活動している人ともっと交流してみたいと思ってこのサイトを作りました。</br>
				更新予定のコンテンツとして、描いたイラストの制作メモ的な話や、好きなモノの自分語り記事などを予定しています。</br>
				</p>
				<section style="margin-top: 2rem; border-top: 1px solid #ccc; padding-top: 1rem;">
  <section class="recent-works-section">
  <h3>Recent Works</h3>
  <div class="recent-grid">
  {recentWorks.map((work) => (
    <a href="/gallery" class="hover-popup">
      <img src={work.default.src} alt="最新の作品" />
    </a>
  ))}
</div>


  <p class="view-more"><a href="/gallery">もっと見る</a></p>
</section>

			<section style="margin-top: 2rem; border-top: 1px solid #ccc; padding-top: 1rem;">
  <h3>Free Drawing Space 🎨</h3>
  <p>なかよく使おうね！！</p>
  
  <iframe 
    src="https://wbo.ophir.dev/boards/latexVStetefu" 
    style="width: 100%; height: 500px; border: 2px solid #eee; border-radius: 8px;"
    title="Drawing Board">
  </iframe>
  <p style="text-align: center; text-transform: lowercase; font-size: 0.75rem; color: #666;">
  リアルタイムで共有されます！
</p>

			<style>
  .recent-grid {
    display: grid;
    /* デフォルト（PC）は4列 */
    grid-template-columns: repeat(4, 1fr);
    gap: 15px;
    margin: 20px 0;
  }

  /* スマホ版（画面幅が720px以下のとき）の調整 */
  @media (max-width: 720px) {
    .recent-grid {
      /* ここを 2列 に変更！ */
      grid-template-columns: repeat(2, 1fr);
      gap: 10px; /* スマホでは間隔を少し狭くすると見栄えが良いです */
    }
  }

  .recent-grid img {
    width: 100%;
    aspect-ratio: 1 / 1;
    object-fit: cover;
    object-position: center 20%; /* 「顔が見切れない」設定を維持 */
    border: 1px solid #eee;
  }

  main {
    /* メインコンテンツの幅を広げる（元はもっと狭いはずです） */
    width: 100%;
    max-width: 1080px; 
    margin: 0 auto;
    padding: 2em;
  }

  /* Infoboxが右に浮いている時、本文が回り込むように調整 */
  @media (min-width: 720px) {
    .infobox {
      margin-left: 2rem;
    }
  }
</style>

		</main>
		<Footer />
	</body>
</html>
