---
import Layout from '../layouts/BlogPost.astro';

// 1. 変数 images を確実に定義する
let images = [];

try {
  // 2. サブフォルダまで含めて画像を探す（ワイルドカードを使用）
  images = await Astro.glob('../assets/works/**/*.{jpg,jpeg,png,webp,JPG,JPEG,PNG,WEBP}');
} catch (e) {
  console.log("画像が見つかりませんでした");
}

const props = {
	title: 'Gallery',
	description: '作品集',
	pubDate: new Date(),
};
---

<Layout {...props}>
	<h1>Gallery</h1>
	
	<div class="gallery-grid">
  {images.map((img) => (
    <div class="hover-popup">
      <img src={img.default.src} alt="作品" loading="lazy" />
    </div>
  ))}
</div>

</Layout>

<style>
	.gallery-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
		gap: 20px;
		padding: 20px 0;
	}
	.gallery-item img {
		width: 100%;
		height: auto;
		border: 1px solid #ccc;
		box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
	}
</style>
